window.__require=function t(e,n,o){function i(c,a){if(!n[c]){if(!e[c]){var u=c.split("/");if(u=u[u.length-1],!e[u]){var s="function"==typeof __require&&__require;if(!a&&s)return s(u,!0);if(r)return r(u,!0);throw new Error("Cannot find module '"+c+"'")}c=u}var l=n[c]={exports:{}};e[c][0].call(l.exports,function(t){return i(e[c][1][t]||t)},l,l.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({FruitCollision:[function(t,e,n){"use strict";cc._RF.push(e,"10417yRnXZNtIP/ksyoFcQk","FruitCollision");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./GameManager"),a=cc._decorator,u=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fruitNumber=0,e.num=1,e.returnNumber=!1,e.getNumberTime=0,e.bianjieX=0,e.testEndDJS=0,e.endOne=0,e}return i(e,t),e.prototype.start=function(){this.bianjieX=360-this.node.width/2},e.prototype.update=function(t){var e=this;if(this.node.x<-this.bianjieX&&(this.node.x=-this.bianjieX),this.node.x>this.bianjieX&&(this.node.x=this.bianjieX),this.returnNumber&&(this.scheduleOnce(function(){e.getNumberTime=0},.25),this.returnNumber=!1),"FruitNode"==this.node.parent.name&&(this.testEndDJS+=t),this.node.y+this.node.width/2>cc.find("Canvas/LineNode").children[0].y&&0==this.endOne&&this.testEndDJS>3){for(var n=0;n<cc.find("Canvas/FruitNode").children.length;n++)cc.find("Canvas/FruitNode").children[n].removeComponent(cc.PhysicsCircleCollider),cc.find("Canvas/FruitNode").children[n].removeComponent(cc.RigidBody);this.node.color=cc.Color.RED,cc.tween(this.node).to(.3,{opacity:0}).to(.3,{opacity:255}).union().repeat(3).call(function(){c.default.Instance.end(),cc.find("Canvas/LineNode").children[0].active=!1}).start(),this.endOne++}},e.prototype.getNumber=function(){var t=this.getNumberTime;return this.getNumberTime++,this.returnNumber=!0,t},e.prototype.onBeginContact=function(t,e,n){if("fruit"==n.node.group){if(e.node.y<n.node.y)return;e.node.parent=cc.find("Canvas/FruitNode"),null!=e.node.getComponent(cc.RigidBody)&&(e.node.getComponent(cc.RigidBody).angularVelocity=0);var o=this.fruitNumber,i=n.node.getComponent("FruitCollision").fruitNumber;this.num*n.node.getComponent("FruitCollision").num==c.default.Instance.target_ret&&(c.default.Instance.beginToCreateFruit(600),0==e.node.getComponent("FruitCollision").getNumber()&&(n.node.getComponent(cc.PhysicsCircleCollider).radius=0,n.node.getComponent(cc.PhysicsCircleCollider).apply(),this.node.getComponent(cc.PhysicsCircleCollider).radius=0,this.node.getComponent(cc.PhysicsCircleCollider).apply(),cc.tween(e.node).to(.1,{position:n.node.position}).call(function(){o<i&&(o=i),c.default.Instance.score+=o+1,10==o&&(o=9),c.default.Instance.createLevelUpFruit(o+1,n.node.position),n.node.active=!1,e.node.active=!1,n.node.destroy(),e.node.destroy()}).start()))}},r([u],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./GameManager":"GameManager"}],GameManager:[function(t,e,n){"use strict";cc._RF.push(e,"55bb8c9KfJB+rKN6Uf8Cn8w","GameManager");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=cc._decorator,a=c.ccclass,u=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fruitNode=null,e.targetfruitNode=null,e.fruitPre=null,e.lineNode=null,e.scoreLabel=null,e.targetLabel=null,e.targetFruit=null,e.Allfruit=[],e.AllDigit=[],e.needClean=!1,e.score=0,e.target_ret=1,e.endOne=0,e.fruitHeigth=0,e.beginToCreateFruit=null,e}var n;return i(e,t),n=e,e.prototype.onLoad=function(){null!=n.Instance&&n.Instance.destroy(),n.Instance=this,cc.director.getPhysicsManager().enabled=!0,n.Instance.beginToCreateFruit=n.Instance.createFruitTimeOut(n.Instance.NextFruit)},e.prototype.start=function(){cc.tween(this.lineNode.children[0]).to(.3,{opacity:255}).to(.3,{opacity:0}).union().repeatForever().start(),this.lineNode.children[0].active=!1,this.createOneFruit(2,cc.v2(0,500),1)},e.prototype.update=function(){this.scoreLabel.string=this.score.toString(),this.lineNode.children[0].y-n.Instance.fruitHeigth<200&&this.lineNode.children[0].y-n.Instance.fruitHeigth>=0&&(this.lineNode.children[0].active=!0),this.lineNode.children[0].y-n.Instance.fruitHeigth>200&&(this.lineNode.children[0].active=!1)},e.prototype.createOneFruit=function(t,e,o){var i=this;void 0===o&&(o=1),n.Instance.needClean&&n.Instance.clearGame();var r=cc.instantiate(this.fruitPre);r.setParent(this.targetfruitNode),r.getComponent(cc.Sprite).spriteFrame=this.Allfruit[t];var c=r.children[0];c.getComponent(cc.Sprite).spriteFrame=this.AllDigit[o],c.height=r.height-30,c.width=r.height-11*t-15,r.getComponent("FruitCollision").fruitNumber=t,r.getComponent("FruitCollision").num=o,r.setPosition(e),r.setScale(0),r.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,r.getComponent(cc.PhysicsCircleCollider).radius=0,r.getComponent(cc.PhysicsCircleCollider).apply(),cc.tween(r).to(.5,{scale:1},{easing:"backOut"}).call(function(){i.targetFruit=r}).start()},e.prototype.createLevelUpFruit=function(t,e,o){void 0===o&&(o=1),o=this.randomInt(1,9);var i=cc.instantiate(this.fruitPre);i.parent=this.fruitNode,i.getComponent(cc.Sprite).spriteFrame=this.Allfruit[t],i.getComponent("FruitCollision").fruitNumber=t;var r=i.children[0];r.getComponent(cc.Sprite).spriteFrame=this.AllDigit[o],r.height=i.height-30,r.width=i.height-35,i.getComponent("FruitCollision").num=o,i.position=e,i.scale=0,i.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,-100),i.getComponent(cc.PhysicsCircleCollider).radius=i.height/2,i.getComponent(cc.PhysicsCircleCollider).apply(),cc.tween(i).to(.5,{scale:1},{easing:"backOut"}).call(function(){null!=i.getComponent(cc.PhysicsCircleCollider)&&(i.getComponent(cc.PhysicsCircleCollider).radius=i.height/2,i.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,i.getComponent(cc.PhysicsCircleCollider).apply())}).start(),n.Instance.fruitHeigth=n.Instance.findHighestFruit()},e.prototype.end=function(){var t=this;if(0==this.endOne){for(var e=0,o=function(o){setTimeout(function(){n.Instance.score+=t.fruitNode.children[o].getComponent("FruitCollision").fruitNumber+1,t.fruitNode.children[o].active=!1},100*++e)},i=this.fruitNode.children.length-1;i>=0;i--)o(i);this.targetfruitNode.active=!0;for(var r=0;r<this.targetfruitNode.children.length;r++)this.targetfruitNode.children[r].active=!1;this.endOne++,this.changeTargetRet(1),n.Instance.targetFruit=null,n.Instance.needClean=!0,n.Instance.beginToCreateFruit(1500)}},e.prototype.changeTargetRet=function(t){n.Instance.target_ret=t,n.Instance.targetLabel.string=n.Instance.target_ret.toString()},e.prototype.changeScore=function(t){n.Instance.score=t,n.Instance.scoreLabel.string=n.Instance.score.toString()},e.prototype.findHighestFruit=function(){for(var t=this.fruitNode.children[0].y,e=1;e<this.fruitNode.children.length;e++){var n=this.fruitNode.children[e].y+this.fruitNode.children[e].width/2;t<n&&(t=n)}return t},e.prototype.randomInt=function(t,e){return Math.round(Math.random()*(e-t)+t)},e.prototype.NextNum=function(){var t,e;if(this.fruitNode.children.length<4)t=this.randomInt(1,9);else{for(var n=[],o=1;o<this.fruitNode.children.length;o++){var i=this.fruitNode.children[o].y+this.fruitNode.children[o].width/2;n.push({high:i,num:this.fruitNode.children[o].getComponent("FruitCollision").num})}n.sort(function(t,e){return e.high-t.high}),t=n[this.randomInt(0,3)].num}return e=this.randomInt(1,9),this.changeTargetRet(t*e),e},e.prototype.NextFruit=function(){n.Instance.targetFruit||n.Instance.createOneFruit(Math.floor(5*Math.random()),cc.v2(0,500),n.Instance.NextNum())},e.prototype.createFruitTimeOut=function(t){var e=null;return function(n){clearTimeout(e),e=setTimeout(function(){t.apply(this)},n)}},e.prototype.clearGame=function(){n.Instance.changeScore(0),n.Instance.endOne=0},e.Instance=null,r([u(cc.Node)],e.prototype,"fruitNode",void 0),r([u(cc.Node)],e.prototype,"targetfruitNode",void 0),r([u(cc.Prefab)],e.prototype,"fruitPre",void 0),r([u(cc.Node)],e.prototype,"lineNode",void 0),r([u(cc.Label)],e.prototype,"scoreLabel",void 0),r([u(cc.Label)],e.prototype,"targetLabel",void 0),r([u(cc.SpriteFrame)],e.prototype,"Allfruit",void 0),r([u(cc.SpriteFrame)],e.prototype,"AllDigit",void 0),n=r([a],e)}(cc.Component);n.default=s,cc._RF.pop()},{}],InputController:[function(t,e,n){"use strict";cc._RF.push(e,"54ec44VYz9C0qtS64/y8LLx","InputController");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var c=t("./GameManager"),a=cc._decorator,u=a.ccclass,s=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchNum=0,e}return i(e,t),e.prototype.start=function(){this.openTouch()},e.prototype.openTouch=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onTouchStart=function(t){if(null!=c.default.Instance.targetFruit){this.touchNum=1;var e=this.node.convertToNodeSpaceAR(t.getLocation()).x,n=c.default.Instance.targetFruit.y;cc.tween(c.default.Instance.targetFruit).to(.1,{position:cc.v3(e,n,0)}).start()}},e.prototype.onTouchMove=function(t){null!=c.default.Instance.targetFruit&&(this.touchNum=1,c.default.Instance.targetFruit.x=this.node.convertToNodeSpaceAR(t.getLocation()).x)},e.prototype.onTouchEnd=function(){null!=c.default.Instance.targetFruit&&1==this.touchNum&&(this.touchNum=0,c.default.Instance.targetFruit.getComponent(cc.PhysicsCircleCollider).radius=c.default.Instance.targetFruit.height/2,c.default.Instance.targetFruit.getComponent(cc.PhysicsCircleCollider).apply(),c.default.Instance.targetFruit.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,c.default.Instance.targetFruit.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,-800),c.default.Instance.targetFruit=null,c.default.Instance.beginToCreateFruit(1800))},r([u],e)}(cc.Component));n.default=s,cc._RF.pop()},{"./GameManager":"GameManager"}]},{},["FruitCollision","GameManager","InputController"]);